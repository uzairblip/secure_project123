{% extends 'base.html' %}

{% block content %}
<div style="padding: 20px;">
    
    <h2 style="color: #ff5e57; margin-bottom: 20px;">üëÆ User Management</h2>

    <table border="1" cellpadding="15" style="width: 100%; border-collapse: collapse; color: #fff; border-color: #444;">
        <thead>
            <tr style="background-color: #27293d; color: #ff5e57;">
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th style="text-align: center;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr style="border-bottom: 1px solid #444; hover: background-color: #333;">
                <td style="font-weight: bold;">{{ u.username }}</td>
                <td>{{ u.email }}</td>
                
                <td>
                    {% if u.is_staff %}
                        <span style="background-color: #ffeb3b; color: #000; padding: 3px 8px; border-radius: 4px; font-weight: bold;">Staff</span>
                    {% else %}
                        <span style="color: #aaa;">Normal User</span>
                    {% endif %}
                </td>
                
                <td style="text-align: center;">
                    
                    <a href="{% url 'toggle_staff' u.id %}" 
                       style="background-color: {% if u.is_staff %}#666{% else %}#2ecc71{% endif %}; color: white; padding: 5px 10px; border-radius: 4px; font-size: 14px; text-decoration: none; margin-right: 10px; font-weight: bold;">
                       {% if u.is_staff %}Demote{% else %}Promote{% endif %}
                    </a>

                    <a href="{% url 'delete_user' u.id %}" 
                       style="background-color: #ff5e57; color: white; padding: 5px 10px; border-radius: 4px; font-size: 14px; text-decoration: none; font-weight: bold;"
                       onclick="return confirm('‚ö†Ô∏è DANGER: Are you sure you want to delete {{ u.username }}?');">
                       Delete
                    </a>

                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; color: #aaa; padding: 30px;">
                    No other users found.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <br>
    <a href="{% url 'dashboard' %}" style="color: #aaa; text-decoration: none;">‚Üê Back to Dashboard</a>
</div>
{% endblock %}