{% extends 'base.html' %}

{% block content %}
<div style="text-align: center; padding: 3rem 0;">
    <h1 style="font-size: 3.5rem; font-weight: 800; margin-bottom: 0;">
        System <span style="color: var(--accent);">Dashboard</span>
    </h1>
    <p style="color: var(--text-dim); margin-bottom: 3rem;">
        Welcome back, <strong style="color:#fff">{{ user.username }}</strong>. 
        <a href="{% url 'profile' %}" style="color:var(--orange); text-decoration:none">
            Settings <i class="fas fa-chevron-right" style="font-size: 0.8rem;"></i>
        </a>
    </p>

    <div class="dashboard-grid">
        <div class="card">
            <div style="display:flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <h4 style="color: var(--text-dim); margin:0; text-align: left;">ACTIVE PRODUCTS</h4>
                    <h2 style="font-size: 3.5rem; margin: 0.5rem 0; text-align: left;">{{ total_products }}</h2>
                </div>
                <div style="background: rgba(0, 212, 255, 0.1); padding: 1.2rem; border-radius: 15px;">
                    <i class="fas fa-box-open" style="color: var(--accent); font-size: 1.8rem;"></i>
                </div>
            </div>
            <div style="color: var(--accent); font-size: 0.9rem; text-align: left; margin-top: 1rem;">
                <i class="fas fa-check-circle"></i> Database Online
            </div>
        </div>

        <div class="card" style="border-left: 4px solid {% if low_stock > 0 %}var(--danger){% else %}var(--accent){% endif %};">
            <div style="display:flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <h4 style="color: var(--text-dim); margin:0; text-align: left;">STOCK ALERTS</h4>
                    <h2 style="font-size: 3.5rem; margin: 0.5rem 0; text-align: left; color: {% if low_stock > 0 %}var(--danger){% else %}#fff{% endif %};">
                        {{ low_stock }}
                    </h2>
                </div>
                <div style="background: rgba(255, 94, 87, 0.1); padding: 1.2rem; border-radius: 15px;">
                    <i class="fas fa-wave-square" style="color: var(--danger); font-size: 1.8rem;"></i>
                </div>
            </div>
            <p style="text-align: left; font-size: 0.8rem; color: var(--text-dim); margin-top: 1rem;">
                {% if low_stock > 0 %}Immediate attention required{% else %}All stock levels nominal{% endif %}
            </p>
        </div>
    </div>

    <div class="dashboard-grid">
        <div class="card" style="text-align: left;">
            <h3 style="margin-top: 0;"><i class="fas fa-warehouse" style="color: var(--accent); margin-right: 10px;"></i> Inventory Control</h3>
            <p style="color: var(--text-dim); margin-bottom: 2rem; line-height: 1.6;">
                Secure CRUD operations for the inventory database. Protected by Django ORM against SQL Injection.
            </p>
            <a href="{% url 'inventory_list' %}" class="btn btn-cyan">
                Manage Inventory <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        {% if user.is_superuser %}
        <div class="card" style="text-align: left; background: linear-gradient(145deg, #1a1f29, #151921); border-color: rgba(255, 94, 87, 0.3);">
            <h3 style="margin-top: 0; color: var(--danger);"><i class="fas fa-user-shield" style="margin-right: 10px;"></i> Security & Admin</h3>
            <p style="color: var(--text-dim); margin-bottom: 2rem; line-height: 1.6;">
                Restrict access, manage system operatives, and review secure audit logs for suspicious activity.
            </p>
            <div style="display:flex; gap: 15px;">
                <a href="{% url 'user_list' %}" class="btn" style="background: rgba(255,255,255,0.05); color:#fff; border: 1px solid rgba(255,255,255,0.1);">Users</a>
                <a href="{% url 'audit_log' %}" class="btn" style="background: rgba(255,255,255,0.05); color:var(--orange); border: 1px solid rgba(255, 159, 67, 0.2);">Audit Logs</a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}