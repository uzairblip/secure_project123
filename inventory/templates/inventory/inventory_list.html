{% extends 'base.html' %}

{% block content %}
<div style="padding: 20px;">
    <h2 style="color: #00d4ff; margin-bottom: 20px;">Product Inventory</h2>

    {% if user.is_superuser or user.groups.all.0.name == "Staff" %}
        <div style="margin-bottom: 15px;">
            <a href="{% url 'add_product' %}" 
               style="background-color: #ffeb3b; color: #333; padding: 10px 15px; text-decoration: none; font-weight: bold; border-radius: 5px;">
               [+ Add New Item]
            </a>
        </div>
    {% endif %}

    <table border="1" cellpadding="10" style="width: 100%; border-collapse: collapse; color: #fff; border-color: #444;">
        <thead>
            <tr style="background-color: #00d4ff; color: #1e1e2f;">
                <th>Product Name</th>
                <th>Quantity</th>
                <th>Price (RM)</th>
                <th>Added By</th>
                {% if user.is_superuser %}
                    <th>Action</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr style="border-bottom: 1px solid #444;">
                <td>{{ product.name }}</td>
                <td>{{ product.quantity }}</td>
                <td>RM {{ product.price }}</td>
                <td>{{ product.created_by.username }}</td>
                
                {% if user.is_superuser %}
                <td style="text-align: center;">
                    <a href="{% url 'delete_product' product.id %}" 
                       style="color: #ff5e57; font-weight: bold; text-decoration: none;"
                       onclick="return confirm('Are you sure you want to delete this item?');">
                       [Delete]
                    </a>
                </td>
                {% endif %}
                
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; color: #aaa;">No products found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}